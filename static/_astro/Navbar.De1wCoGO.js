import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n,R as M}from"./index.voUD-miS.js";import{u as Ce,r as $e,s as le,b as Pe,c as Ae,t as Ee,d as Oe}from"./cartStore.Ck8i-npk.js";import{D as ze,f as G,C as Me}from"./index.Br6pAFfs.js";import{g as De,d as _e}from"./i18n.kltrk0Or.js";import{f as de,s as Re,n as U,o as k,v as z,T as I,A as H,e as Fe,G as R,a as F,h as K,L as X,z as ee}from"./uiOverlayStore.DG-zDXnJ.js";import{T as ie}from"./themeObjects.CpNzzJD1.js";import{u as J}from"./index.BO1yvSFp.js";import{$ as ue,a as Le,w as Ue}from"./use-active-press.403lRAa0.js";import{f as Be,Y as B,y as q,n as Q,o as E,V as me,K as W,t as qe,u as L,A as oe,s as V}from"./transition.DpjJzyN3.js";import"./index.B-gUmfTx.js";import"./index.B9Lqsz3r.js";import"./index.BfFOJjEX.js";import"./index.Bv6cXHiw.js";function We({title:t,titleId:s,...a},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?n.createElement("title",{id:s},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ge=n.forwardRef(We);function He({title:t,titleId:s,...a},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?n.createElement("title",{id:s},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ve=n.forwardRef(He);function Qe({title:t,titleId:s,...a},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?n.createElement("title",{id:s},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const te=n.forwardRef(Qe);function Ye(t,s){return n.useMemo(()=>{var a;if(t.type)return t.type;let r=(a=t.as)!=null?a:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||s?.tagName==="BUTTON"&&!s.hasAttribute("type"))return"button"},[t.type,t.as,s])}function Ze({onFocus:t}){let[s,a]=n.useState(!0),r=Be();return s?M.createElement(de,{as:"button",type:"button",features:Re.Focusable,onFocus:d=>{d.preventDefault();let o,c=50;function u(){if(c--<=0){o&&cancelAnimationFrame(o);return}if(t()){if(cancelAnimationFrame(o),!r.current)return;a(!1);return}o=requestAnimationFrame(u)}o=requestAnimationFrame(u)}}):null}const xe=n.createContext(null);function Je(){return{groups:new Map,get(t,s){var a;let r=this.groups.get(t);r||(r=new Map,this.groups.set(t,r));let d=(a=r.get(s))!=null?a:0;r.set(s,d+1);let o=Array.from(r.keys()).indexOf(s);function c(){let u=r.get(s);u>1?r.set(s,u-1):r.delete(s)}return[o,c]}}}function Ke({children:t}){let s=n.useRef(Je());return n.createElement(xe.Provider,{value:s},t)}function fe(t){let s=n.useContext(xe);if(!s)throw new Error("You must wrap your component in a <StableCollection>");let a=n.useId(),[r,d]=s.current.get(t,a);return n.useEffect(()=>d,[]),r}var Xe=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Xe||{}),et=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(et||{}),tt=(t=>(t[t.SetSelectedIndex=0]="SetSelectedIndex",t[t.RegisterTab=1]="RegisterTab",t[t.UnregisterTab=2]="UnregisterTab",t[t.RegisterPanel=3]="RegisterPanel",t[t.UnregisterPanel=4]="UnregisterPanel",t))(tt||{});let st={0(t,s){var a;let r=R(t.tabs,f=>f.current),d=R(t.panels,f=>f.current),o=r.filter(f=>{var j;return!((j=f.current)!=null&&j.hasAttribute("disabled"))}),c={...t,tabs:r,panels:d};if(s.index<0||s.index>r.length-1){let f=L(Math.sign(s.index-t.selectedIndex),{[-1]:()=>1,0:()=>L(Math.sign(s.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(o.length===0)return c;let j=L(f,{0:()=>r.indexOf(o[0]),1:()=>r.indexOf(o[o.length-1])});return{...c,selectedIndex:j===-1?t.selectedIndex:j}}let u=r.slice(0,s.index),h=[...r.slice(s.index),...u].find(f=>o.includes(f));if(!h)return c;let g=(a=r.indexOf(h))!=null?a:t.selectedIndex;return g===-1&&(g=t.selectedIndex),{...c,selectedIndex:g}},1(t,s){if(t.tabs.includes(s.tab))return t;let a=t.tabs[t.selectedIndex],r=R([...t.tabs,s.tab],o=>o.current),d=t.selectedIndex;return t.info.current.isControlled||(d=r.indexOf(a),d===-1&&(d=t.selectedIndex)),{...t,tabs:r,selectedIndex:d}},2(t,s){return{...t,tabs:t.tabs.filter(a=>a!==s.tab)}},3(t,s){return t.panels.includes(s.panel)?t:{...t,panels:R([...t.panels,s.panel],a=>a.current)}},4(t,s){return{...t,panels:t.panels.filter(a=>a!==s.panel)}}},se=n.createContext(null);se.displayName="TabsDataContext";function D(t){let s=n.useContext(se);if(s===null){let a=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,D),a}return s}let ae=n.createContext(null);ae.displayName="TabsActionsContext";function re(t){let s=n.useContext(ae);if(s===null){let a=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,re),a}return s}function at(t,s){return L(s.type,st,t,s)}let rt="div";function nt(t,s){let{defaultIndex:a=0,vertical:r=!1,manual:d=!1,onChange:o,selectedIndex:c=null,...u}=t;const h=r?"vertical":"horizontal",g=d?"manual":"auto";let f=c!==null,j=V({isControlled:f}),S=q(s),[i,x]=n.useReducer(at,{info:j,selectedIndex:c??a,tabs:[],panels:[]}),b=U({selectedIndex:i.selectedIndex}),w=V(o||(()=>{})),T=V(i.tabs),y=n.useMemo(()=>({orientation:h,activation:g,...i}),[h,g,i]),P=E(v=>(x({type:1,tab:v}),()=>x({type:2,tab:v}))),A=E(v=>(x({type:3,panel:v}),()=>x({type:4,panel:v}))),l=E(v=>{m.current!==v&&w.current(v),f||x({type:0,index:v})}),m=V(f?t.selectedIndex:i.selectedIndex),N=n.useMemo(()=>({registerTab:P,registerPanel:A,change:l}),[]);Q(()=>{x({type:0,index:c??a})},[c]),Q(()=>{if(m.current===void 0||i.tabs.length<=0)return;let v=R(i.tabs,$=>$.current);v.some(($,O)=>i.tabs[O]!==$)&&l(v.indexOf(i.tabs[m.current]))});let Y={ref:S},_=W();return M.createElement(Ke,null,M.createElement(ae.Provider,{value:N},M.createElement(se.Provider,{value:y},y.tabs.length<=0&&M.createElement(Ze,{onFocus:()=>{var v,$;for(let O of T.current)if(((v=O.current)==null?void 0:v.tabIndex)===0)return($=O.current)==null||$.focus(),!0;return!1}}),_({ourProps:Y,theirProps:u,slot:b,defaultTag:rt,name:"Tabs"}))))}let lt="div";function it(t,s){let{orientation:a,selectedIndex:r}=D("Tab.List"),d=q(s),o=U({selectedIndex:r}),c=t,u={ref:d,role:"tablist","aria-orientation":a};return W()({ourProps:u,theirProps:c,slot:o,defaultTag:lt,name:"Tabs.List"})}let ot="button";function ct(t,s){var a,r;let d=n.useId(),{id:o=`headlessui-tabs-tab-${d}`,disabled:c=!1,autoFocus:u=!1,...h}=t,{orientation:g,activation:f,selectedIndex:j,tabs:S,panels:i}=D("Tab"),x=re("Tab"),b=D("Tab"),[w,T]=n.useState(null),y=n.useRef(null),P=q(y,s,T);Q(()=>x.registerTab(y),[x,y]);let A=fe("tabs"),l=S.indexOf(y);l===-1&&(l=A);let m=l===j,N=E(p=>{let C=p();if(C===H.Success&&f==="auto"){let Z=Fe(y.current),ne=b.tabs.findIndex(Ie=>Ie.current===Z);ne!==-1&&x.change(ne)}return C}),Y=E(p=>{let C=S.map(Z=>Z.current).filter(Boolean);if(p.key===k.Space||p.key===k.Enter){p.preventDefault(),p.stopPropagation(),x.change(l);return}switch(p.key){case k.Home:case k.PageUp:return p.preventDefault(),p.stopPropagation(),N(()=>z(C,I.First));case k.End:case k.PageDown:return p.preventDefault(),p.stopPropagation(),N(()=>z(C,I.Last))}if(N(()=>L(g,{vertical(){return p.key===k.ArrowUp?z(C,I.Previous|I.WrapAround):p.key===k.ArrowDown?z(C,I.Next|I.WrapAround):H.Error},horizontal(){return p.key===k.ArrowLeft?z(C,I.Previous|I.WrapAround):p.key===k.ArrowRight?z(C,I.Next|I.WrapAround):H.Error}}))===H.Success)return p.preventDefault()}),_=n.useRef(!1),v=E(()=>{var p;_.current||(_.current=!0,(p=y.current)==null||p.focus({preventScroll:!0}),x.change(l),qe(()=>{_.current=!1}))}),$=E(p=>{p.preventDefault()}),{isFocusVisible:O,focusProps:ve}=ue({autoFocus:u}),{isHovered:je,hoverProps:Ne}=Le({isDisabled:c}),{pressed:we,pressProps:Se}=Ue({disabled:c}),Te=U({selected:m,hover:je,active:we,focus:O,autofocus:u,disabled:c}),ke=me({ref:P,onKeyDown:Y,onMouseDown:$,onClick:v,id:o,role:"tab",type:Ye(t,w),"aria-controls":(r=(a=i[l])==null?void 0:a.current)==null?void 0:r.id,"aria-selected":m,tabIndex:m?0:-1,disabled:c||void 0,autoFocus:u},ve,Ne,Se);return W()({ourProps:ke,theirProps:h,slot:Te,defaultTag:ot,name:"Tabs.Tab"})}let dt="div";function ut(t,s){let{selectedIndex:a}=D("Tab.Panels"),r=q(s),d=U({selectedIndex:a}),o=t,c={ref:r};return W()({ourProps:c,theirProps:o,slot:d,defaultTag:dt,name:"Tabs.Panels"})}let mt="div",xt=oe.RenderStrategy|oe.Static;function ft(t,s){var a,r,d,o;let c=n.useId(),{id:u=`headlessui-tabs-panel-${c}`,tabIndex:h=0,...g}=t,{selectedIndex:f,tabs:j,panels:S}=D("Tab.Panel"),i=re("Tab.Panel"),x=n.useRef(null),b=q(x,s);Q(()=>i.registerPanel(x),[i,x]);let w=fe("panels"),T=S.indexOf(x);T===-1&&(T=w);let y=T===f,{isFocusVisible:P,focusProps:A}=ue(),l=U({selected:y,focus:P}),m=me({ref:b,id:u,role:"tabpanel","aria-labelledby":(r=(a=j[T])==null?void 0:a.current)==null?void 0:r.id,tabIndex:y?h:-1},A),N=W();return!y&&((d=g.unmount)==null||d)&&!((o=g.static)!=null&&o)?M.createElement(de,{"aria-hidden":"true",...m}):N({ourProps:m,theirProps:g,slot:l,defaultTag:mt,features:xt,visible:y,name:"Tabs.Panel"})}let pt=B(ct),pe=B(nt),he=B(it),ge=B(ut),be=B(ft),ht=Object.assign(pt,{Group:pe,List:he,Panels:ge,Panel:be});const gt={BASE_URL:"/"};function bt({open:t,setOpen:s,currentCart:a,quantity:r,loading:d,setLoading:o,theme:c="hub"}){const u=De(_e,gt),h=d,g=ie[c]||ie.hub,f=a?a.lines.map((i,x)=>{const b=`/pure-plant-new/products/${i.merchandise.product.handle}`,w=i.merchandise.title===ze?i.merchandise.product.title:i.merchandise.title;return{id:x,name:w,href:b,color:"None",price:G(i.cost.totalAmount),imageSrc:i.merchandise.product.featuredImage?.url,imageAlt:"Picture of "+w,quantity:i.quantity,lineId:i.id,variantId:i.merchandise.id}}):[],j=async(i,x)=>{o(!0);try{await Ce({lineId:i.lineId,variantId:i.variantId,quantity:x})}finally{o(!1)}},S=async i=>{o(!0);try{await $e(i.lineId)}finally{o(!1)}};return n.useEffect(()=>(F("cartDialog",t),()=>F("cartDialog",!1)),[t]),!a||a.lines.length===0||r===0?e.jsxs(K,{open:t,onClose:s,className:"relative z-10",children:[e.jsx(X,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-stretch justify-center text-center sm:items-center sm:px-6 lg:px-8",children:e.jsx(ee,{transition:!0,className:"flex w-full transform text-left text-base transition data-closed:scale-105 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:max-w-3xl",children:e.jsxs("form",{className:"relative flex w-full flex-col overflow-hidden bg-white pt-6 pb-8 sm:rounded-lg sm:pb-6 lg:py-8",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"}),e.jsxs("button",{type:"button",onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(te,{"aria-hidden":"true",className:"size-6"})]})]}),e.jsxs("section",{"aria-labelledby":"cart-heading",children:[e.jsx("h2",{id:"cart-heading",className:"sr-only",children:"No items in your shopping cart"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 px-4 sm:px-6 lg:px-8",children:e.jsx("li",{className:"flex py-8 text-sm sm:items-center",children:e.jsx("div",{className:"ml-4 grid flex-auto grid-cols-1 grid-rows-1 items-start gap-x-5 gap-y-3 sm:ml-6 sm:flex sm:items-center sm:gap-0",children:e.jsx("div",{className:"row-end-1 flex-auto sm:pr-6",children:e.jsx("h3",{className:"font-medium text-gray-900",children:e.jsx("a",{children:"Your cart is empty."})})})})},0)})]}),e.jsx("section",{"aria-labelledby":"summary-heading",className:"mt-auto sm:px-6 lg:px-8"}),e.jsx("div",{className:"mt-8 flex justify-end px-4 sm:px-6 lg:px-8",children:e.jsx("a",{href:u+"/products/",children:e.jsx("div",{className:`rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white shadow-xs focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50 focus:outline-hidden ${g.bg}`,children:"Go to Products"})})})]})})})})]}):e.jsxs(K,{open:t,onClose:s,className:"relative z-10",children:[e.jsx(X,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-stretch justify-center text-center sm:items-center sm:px-6 lg:px-8",children:e.jsx(ee,{transition:!0,className:"flex w-full transform text-left text-base transition data-closed:scale-105 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:max-w-3xl",children:e.jsxs("form",{className:"relative flex w-full flex-col overflow-hidden bg-white pt-6 pb-8 sm:rounded-lg sm:pb-6 lg:py-8",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"}),e.jsxs("button",{type:"button",onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(te,{"aria-hidden":"true",className:"size-6"})]})]}),e.jsxs("section",{"aria-labelledby":"cart-heading",children:[e.jsx("h2",{id:"cart-heading",className:"sr-only",children:"Items in your shopping cart"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 px-4 sm:px-6 lg:px-8",children:f.map((i,x)=>e.jsxs("li",{className:"flex py-8 text-sm sm:items-center",children:[e.jsx("img",{alt:i.imageAlt,src:i.imageSrc,className:"size-24 flex-none rounded-lg border border-gray-200 sm:size-32"}),e.jsxs("div",{className:"ml-4 grid flex-auto grid-cols-1 grid-rows-1 items-start gap-x-5 gap-y-3 sm:ml-6 sm:flex sm:items-center sm:gap-0",children:[e.jsxs("div",{className:"row-end-1 flex-auto sm:pr-6",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:e.jsx("a",{href:i.href,children:i.name})}),e.jsx("p",{className:"mt-1 text-gray-500",children:i.color})]}),e.jsx("p",{className:"row-span-2 row-end-2 font-medium text-gray-900 sm:order-1 sm:ml-6 sm:w-1/3 sm:flex-none sm:text-right",children:i.price}),e.jsxs("div",{className:"flex items-center sm:block sm:flex-none sm:text-center",children:[e.jsx("div",{className:`flex items-center rounded-md outline-1 -outline-offset-1 outline-gray-300 focus-within:outline-2 focus-within:-outline-offset-2 ${g.outline}`,children:e.jsx("input",{type:"number",min:1,inputMode:"numeric",name:`quantity-${x}`,"aria-label":`Quantity, ${i.name}`,className:"w-12 appearance-none bg-white py-1.5 text-center text-base text-gray-900 focus:outline-none sm:text-sm",value:i.quantity,onChange:b=>{const w=Math.max(1,Number(b.target.value)||1);j(i,w)}})}),e.jsx("button",{type:"button",className:"ml-4 font-medium text-black hover:text-indigo-500 sm:mt-2 sm:ml-0",onClick:()=>S(i),children:e.jsx("span",{children:"Remove"})})]})]})]},i.id))})]}),e.jsx("section",{"aria-labelledby":"summary-heading",className:"mt-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-gray-50 p-6 sm:rounded-lg sm:p-8",children:[e.jsx("h2",{id:"summary-heading",className:"sr-only",children:"Order summary"}),e.jsx("div",{className:"flow-root",children:e.jsxs("dl",{className:"-my-4 divide-y divide-gray-200 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-gray-600",children:"Subtotal"}),e.jsx("dd",{className:"font-medium text-gray-900",children:G(a.cost.totalAmount)})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-gray-600",children:"Shipping"}),e.jsx("dd",{className:"font-medium text-gray-900",children:"Calculated at checkout."})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-gray-600",children:"Tax"}),e.jsx("dd",{className:"font-medium text-gray-900",children:G(a.cost.totalTaxAmount)})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Order total"}),e.jsx("dd",{className:"text-base font-medium text-gray-900",children:G({currencyCode:a.cost.totalAmount.currencyCode,amount:((parseFloat(a.cost.totalAmount.amount)||0)+(parseFloat(a.cost.totalTaxAmount.amount)||0)).toString()})})]})]})})]})}),e.jsx("div",{className:"mt-8 flex justify-end px-4 sm:px-6 lg:px-8",children:e.jsx("a",{href:h?void 0:a.checkoutUrl,"aria-disabled":h,tabIndex:h?-1:void 0,className:h?"pointer-events-none":void 0,children:e.jsx("div",{className:`rounded-md border border-transparent px-4 py-2 text-sm font-medium shadow-xs focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:outline-hidden ${h?"cursor-not-allowed bg-gray-300 text-gray-600":`${g.bg} text-white focus:ring-indigo-500`}`,children:"Continue to Payment"})})})]})})})})]})}async function yt(t){const s=await fetch(Me,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`${t}`},body:JSON.stringify({query:`
        query {
          customer {
            firstName
            lastName
            emailAddress { emailAddress }
          }
        }
      `})});if(!s.ok)return null;const a=await s.json();if(a.errors||!a.data?.customer)return null;const r=a.data.customer;return{firstName:r.firstName??null,lastName:r.lastName??null,email:r.emailAddress?.emailAddress??null}}function ye(t){let s="";for(const a of t)s+=String.fromCharCode(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function vt(t){const s=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(t));return ye(new Uint8Array(s))}async function jt(){const t="pureplantdev.myshopify.com",s="1bebf8ab-21a5-49e2-87d1-083d826e2fac",a=`${window.location.origin}/auth/callback`,r=await fetch(`https://${t}/.well-known/openid-configuration`).then(h=>h.json()),d=ye(crypto.getRandomValues(new Uint8Array(32)));sessionStorage.setItem("pkce_verifier",d);const o=await vt(d),c=crypto.randomUUID();sessionStorage.setItem("oauth_state",c);const u=new URL(r.authorization_endpoint);u.searchParams.set("client_id",s),u.searchParams.set("response_type","code"),u.searchParams.set("scope","openid email customer-account-api:full"),u.searchParams.set("redirect_uri",a),u.searchParams.set("code_challenge",o),u.searchParams.set("code_challenge_method","S256"),u.searchParams.set("state",c),window.location.href=u.toString()}function ce(){const[t,s]=n.useState("loading"),[a,r]=n.useState("");return n.useEffect(()=>{const d=localStorage.getItem("customer_access_token");if(!d){s("signedOut");return}yt(d).then(o=>{o?(r(o.firstName&&o.lastName?`${o.firstName??""} ${o.lastName??""}`:`${o.email}`),s("signedIn")):(localStorage.removeItem("customer_access_token"),s("signedOut"))})},[]),t==="loading"?null:t==="signedOut"?e.jsx("button",{className:"cursor-pointer",onClick:jt,children:"Sign in"}):e.jsx("span",{children:a})}function Dt({navigation:t,currentURL:s,theme:a,logo:r}){const[d,o]=n.useState(!1),c=J(Ae),u=J(Oe),h=J(Ee),[g,f]=n.useState(!1),[j,S]=n.useState(!0),[i,x]=n.useState(null),b=l=>{T(!!l),x(l)},[w,T]=n.useState(!1),[y,P]=n.useState(!1);n.useEffect(()=>{async function l(){try{await Pe()}catch(m){console.error("Failed to refresh cart:",m)}finally{S(!1)}}l(),f(!0)},[]),n.useEffect(()=>(F("mobileMenu",d),()=>F("mobileMenu",!1)),[d]),n.useEffect(()=>{F("cartDialog",c)},[c]),n.useEffect(()=>{setTimeout(()=>{P(w)},200)},[w]);const A=g?h:0;return e.jsxs("div",{className:"bg-red-800",children:[e.jsx(bt,{open:c,setOpen:le,currentCart:u,quantity:h,loading:j,setLoading:S,theme:a}),e.jsxs(K,{open:d,onClose:o,className:"relative z-40 lg:hidden",children:[e.jsx(X,{transition:!0,className:"fixed inset-0 bg-black/25 transition-opacity duration-300 ease-linear data-closed:opacity-0"}),e.jsx("div",{className:"fixed inset-0 z-40 flex",children:e.jsxs(ee,{transition:!0,className:"relative flex w-full max-w-xs transform flex-col overflow-y-auto bg-white pb-12 shadow-xl transition duration-300 ease-in-out data-closed:-translate-x-full",children:[e.jsx("div",{className:"flex px-4 pt-5 pb-2",children:e.jsxs("button",{type:"button",onClick:()=>o(!1),className:"relative -m-2 inline-flex items-center justify-center rounded-md p-2 text-gray-400",children:[e.jsx("span",{className:"absolute -inset-0.5"}),e.jsx("span",{className:"sr-only",children:"Close menu"}),e.jsx(te,{"aria-hidden":"true",className:"size-6"})]})}),e.jsxs(pe,{className:"mt-2",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx(he,{className:"-mb-px flex space-x-8 px-4",children:t.categories.map(l=>e.jsx(ht,{className:"data-selected:text-bold flex-1 border-b-2 border-transparent px-1 py-4 text-base font-medium whitespace-nowrap text-gray-900",children:l.name},l.name))})}),e.jsx(ge,{as:n.Fragment,children:t.categories.map(l=>e.jsx(be,{className:"space-y-12 px-4 py-6",children:e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-10",children:l.featured.map(m=>e.jsxs("div",{className:"group relative",children:[e.jsx("img",{alt:m.imageAlt,src:m.imageSrc,srcSet:m.imageSrcset,sizes:m.imageSizes,className:"aspect-square w-full rounded-md bg-gray-100 object-cover"}),e.jsxs("a",{href:m.href,className:"mt-6 block text-sm font-medium text-gray-900",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 z-10"}),m.name]}),e.jsx("p",{"aria-hidden":"true",className:"mt-1 text-sm text-gray-500",children:"Shop now"})]},m.name))})},l.name))})]}),e.jsx("div",{className:"space-y-6 border-t border-gray-200 px-4 py-6",children:t.pages.map(l=>e.jsx("div",{className:"flow-root",children:e.jsx("a",{href:l.href,className:"-m-2 block p-2 font-medium text-gray-900",children:l.name})},l.name))}),e.jsx("div",{className:"space-y-6 border-t border-gray-200 px-4 py-6",children:e.jsx(ce,{})})]})})]}),e.jsx("header",{className:"relative",children:e.jsx("nav",{"aria-label":"Top",children:e.jsx("div",{className:"bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex h-16 items-center justify-between",children:[e.jsx("div",{className:"hidden lg:flex lg:flex-1 lg:items-center",children:e.jsxs("a",{href:t.home.href,children:[e.jsx("span",{className:"sr-only",children:r.alt}),e.jsx("img",{alt:r.alt,src:r.src,srcSet:r.srcset,sizes:r.sizes,className:"h-8 w-auto"})]})}),e.jsx("div",{className:"hidden h-full lg:flex",children:e.jsx("div",{className:"inset-x-0 bottom-0 px-4",onBlur:l=>{l.currentTarget.contains(l.relatedTarget)||b(null)},children:e.jsxs("div",{className:"flex h-full justify-center space-x-14",children:[t.categories.map(l=>{const m=`megamenu-${l.name.toLowerCase().replace(/\s+/g,"-")}`;return e.jsxs("div",{className:"group flex",onMouseOver:()=>b(l.name),onMouseMove:()=>b(l.name),onMouseEnter:()=>b(l.name),children:[e.jsx("div",{className:"relative flex",children:e.jsx("button",{type:"button","aria-expanded":i===l.name,"aria-controls":m,onFocus:()=>b(l.name),onClick:()=>b(l.name),className:`relative flex items-center justify-center text-sm transition-colors duration-200 ease-out hover:text-gray-800 ${i===l.name?"font-bold text-black":"font-medium text-gray-700"}`,children:l.name})}),e.jsxs("div",{id:m,onMouseLeave:()=>b(null),className:`${y?"":"transition-all duration-200"} absolute inset-x-0 top-full z-10 w-full bg-white text-sm text-gray-500 ${i===l.name?"translate-y-0 opacity-100":"pointer-events-none opacity-0 "+(y?"":"-translate-y-8")}`,children:[e.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 top-1/2 bg-white shadow-sm"}),e.jsx("div",{className:"relative bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-8",children:e.jsx("div",{className:"grid grid-cols-4 gap-x-8 gap-y-10 py-16",children:l.featured.map(N=>e.jsxs("div",{className:"group relative",children:[e.jsx("img",{alt:N.imageAlt,src:N.imageSrc,srcSet:N.imageSrcset,sizes:N.imageSizes,className:"aspect-square w-full rounded-md bg-gray-100 object-cover"}),e.jsxs("a",{href:N.href,className:"mt-4 block font-medium text-gray-900",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 z-10"}),N.name]})]},N.name))})})})]})]},l.name)}),t.pages.map(l=>{const m=s===l.href;return e.jsx("a",{href:l.href,"aria-current":m?"page":void 0,className:`flex items-center text-sm transition-colors ${m?"font-bold text-black":"font-medium text-gray-700 hover:text-gray-800"}`,children:l.name},l.name)})]})})}),e.jsx("div",{className:"flex flex-1 items-center lg:hidden",children:e.jsxs("button",{type:"button",onClick:()=>o(!0),className:"-ml-2 rounded-md bg-white p-2 text-gray-400",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Ge,{"aria-hidden":"true",className:"size-6"})]})}),e.jsxs("a",{href:t.home.href,className:"lg:hidden",children:[e.jsx("span",{className:"sr-only",children:r.alt}),e.jsx("img",{alt:r.alt,src:r.src,srcSet:r.srcset,sizes:r.sizes,className:"h-8 w-auto"})]}),e.jsx("div",{className:"flex flex-1 items-center justify-end",children:e.jsxs("div",{className:"flex items-center lg:ml-8",children:[e.jsx("div",{className:"hidden whitespace-nowrap lg:flex lg:flex-1 lg:items-center lg:justify-end lg:space-x-6",children:e.jsx(ce,{})}),e.jsx("div",{className:"ml-4 flow-root lg:ml-8",children:e.jsxs("a",{onClick:()=>le(!c),className:"group -m-2 flex items-center p-2",children:[e.jsx(Ve,{"aria-hidden":"true",className:"size-6 shrink-0 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 group-hover:text-gray-800",suppressHydrationWarning:!0,children:A}),e.jsx("span",{className:"sr-only",children:"items in cart, view bag"})]})})]})})]})})})})})})]})}export{Dt as default};
