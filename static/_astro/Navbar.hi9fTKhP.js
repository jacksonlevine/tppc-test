import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l,R as z}from"./index.voUD-miS.js";import{u as Ce,r as Pe,s as le,b as $e,c as Ae,t as Ee,d as ze}from"./cartStore.CIHS9aOs.js";import{D as Oe,f as G,C as Re}from"./index.ChkhOSDS.js";import{g as _e,d as Me}from"./i18n.kltrk0Or.js";import{f as de,s as Fe,n as U,o as T,v as E,T as k,A as H,e as De,G as F,a as D,h as K,L as X,z as ee}from"./uiOverlayStore.DG-zDXnJ.js";import{T as ie}from"./themeObjects.CpNzzJD1.js";import{u as J}from"./index.BO1yvSFp.js";import{$ as ue,a as Le,w as Ue}from"./use-active-press.403lRAa0.js";import{f as Be,Y as B,y as q,n as Q,o as $,V as me,K as W,t as qe,u as L,A as oe,s as V}from"./transition.DpjJzyN3.js";import"./index.B-gUmfTx.js";import"./index.B9Lqsz3r.js";import"./index.BfFOJjEX.js";import"./index.Bv6cXHiw.js";function We({title:t,titleId:s,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?l.createElement("title",{id:s},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ge=l.forwardRef(We);function He({title:t,titleId:s,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?l.createElement("title",{id:s},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ve=l.forwardRef(He);function Qe({title:t,titleId:s,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?l.createElement("title",{id:s},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const te=l.forwardRef(Qe);function Ye(t,s){return l.useMemo(()=>{var a;if(t.type)return t.type;let r=(a=t.as)!=null?a:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||s?.tagName==="BUTTON"&&!s.hasAttribute("type"))return"button"},[t.type,t.as,s])}function Ze({onFocus:t}){let[s,a]=l.useState(!0),r=Be();return s?z.createElement(de,{as:"button",type:"button",features:Fe.Focusable,onFocus:d=>{d.preventDefault();let i,c=50;function u(){if(c--<=0){i&&cancelAnimationFrame(i);return}if(t()){if(cancelAnimationFrame(i),!r.current)return;a(!1);return}i=requestAnimationFrame(u)}i=requestAnimationFrame(u)}}):null}const xe=l.createContext(null);function Je(){return{groups:new Map,get(t,s){var a;let r=this.groups.get(t);r||(r=new Map,this.groups.set(t,r));let d=(a=r.get(s))!=null?a:0;r.set(s,d+1);let i=Array.from(r.keys()).indexOf(s);function c(){let u=r.get(s);u>1?r.set(s,u-1):r.delete(s)}return[i,c]}}}function Ke({children:t}){let s=l.useRef(Je());return l.createElement(xe.Provider,{value:s},t)}function fe(t){let s=l.useContext(xe);if(!s)throw new Error("You must wrap your component in a <StableCollection>");let a=l.useId(),[r,d]=s.current.get(t,a);return l.useEffect(()=>d,[]),r}var Xe=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Xe||{}),et=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(et||{}),tt=(t=>(t[t.SetSelectedIndex=0]="SetSelectedIndex",t[t.RegisterTab=1]="RegisterTab",t[t.UnregisterTab=2]="UnregisterTab",t[t.RegisterPanel=3]="RegisterPanel",t[t.UnregisterPanel=4]="UnregisterPanel",t))(tt||{});let st={0(t,s){var a;let r=F(t.tabs,p=>p.current),d=F(t.panels,p=>p.current),i=r.filter(p=>{var j;return!((j=p.current)!=null&&j.hasAttribute("disabled"))}),c={...t,tabs:r,panels:d};if(s.index<0||s.index>r.length-1){let p=L(Math.sign(s.index-t.selectedIndex),{[-1]:()=>1,0:()=>L(Math.sign(s.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(i.length===0)return c;let j=L(p,{0:()=>r.indexOf(i[0]),1:()=>r.indexOf(i[i.length-1])});return{...c,selectedIndex:j===-1?t.selectedIndex:j}}let u=r.slice(0,s.index),g=[...r.slice(s.index),...u].find(p=>i.includes(p));if(!g)return c;let b=(a=r.indexOf(g))!=null?a:t.selectedIndex;return b===-1&&(b=t.selectedIndex),{...c,selectedIndex:b}},1(t,s){if(t.tabs.includes(s.tab))return t;let a=t.tabs[t.selectedIndex],r=F([...t.tabs,s.tab],i=>i.current),d=t.selectedIndex;return t.info.current.isControlled||(d=r.indexOf(a),d===-1&&(d=t.selectedIndex)),{...t,tabs:r,selectedIndex:d}},2(t,s){return{...t,tabs:t.tabs.filter(a=>a!==s.tab)}},3(t,s){return t.panels.includes(s.panel)?t:{...t,panels:F([...t.panels,s.panel],a=>a.current)}},4(t,s){return{...t,panels:t.panels.filter(a=>a!==s.panel)}}},se=l.createContext(null);se.displayName="TabsDataContext";function O(t){let s=l.useContext(se);if(s===null){let a=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,O),a}return s}let ae=l.createContext(null);ae.displayName="TabsActionsContext";function re(t){let s=l.useContext(ae);if(s===null){let a=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,re),a}return s}function at(t,s){return L(s.type,st,t,s)}let rt="div";function nt(t,s){let{defaultIndex:a=0,vertical:r=!1,manual:d=!1,onChange:i,selectedIndex:c=null,...u}=t;const g=r?"vertical":"horizontal",b=d?"manual":"auto";let p=c!==null,j=V({isControlled:p}),v=q(s),[n,m]=l.useReducer(at,{info:j,selectedIndex:c??a,tabs:[],panels:[]}),N=U({selectedIndex:n.selectedIndex}),o=V(i||(()=>{})),x=V(n.tabs),f=l.useMemo(()=>({orientation:g,activation:b,...n}),[g,b,n]),R=$(y=>(m({type:1,tab:y}),()=>m({type:2,tab:y}))),_=$(y=>(m({type:3,panel:y}),()=>m({type:4,panel:y}))),w=$(y=>{S.current!==y&&o.current(y),p||m({type:0,index:y})}),S=V(p?t.selectedIndex:n.selectedIndex),P=l.useMemo(()=>({registerTab:R,registerPanel:_,change:w}),[]);Q(()=>{m({type:0,index:c??a})},[c]),Q(()=>{if(S.current===void 0||n.tabs.length<=0)return;let y=F(n.tabs,C=>C.current);y.some((C,A)=>n.tabs[A]!==C)&&w(y.indexOf(n.tabs[S.current]))});let Y={ref:v},M=W();return z.createElement(Ke,null,z.createElement(ae.Provider,{value:P},z.createElement(se.Provider,{value:f},f.tabs.length<=0&&z.createElement(Ze,{onFocus:()=>{var y,C;for(let A of x.current)if(((y=A.current)==null?void 0:y.tabIndex)===0)return(C=A.current)==null||C.focus(),!0;return!1}}),M({ourProps:Y,theirProps:u,slot:N,defaultTag:rt,name:"Tabs"}))))}let lt="div";function it(t,s){let{orientation:a,selectedIndex:r}=O("Tab.List"),d=q(s),i=U({selectedIndex:r}),c=t,u={ref:d,role:"tablist","aria-orientation":a};return W()({ourProps:u,theirProps:c,slot:i,defaultTag:lt,name:"Tabs.List"})}let ot="button";function ct(t,s){var a,r;let d=l.useId(),{id:i=`headlessui-tabs-tab-${d}`,disabled:c=!1,autoFocus:u=!1,...g}=t,{orientation:b,activation:p,selectedIndex:j,tabs:v,panels:n}=O("Tab"),m=re("Tab"),N=O("Tab"),[o,x]=l.useState(null),f=l.useRef(null),R=q(f,s,x);Q(()=>m.registerTab(f),[m,f]);let _=fe("tabs"),w=v.indexOf(f);w===-1&&(w=_);let S=w===j,P=$(h=>{let I=h();if(I===H.Success&&p==="auto"){let Z=De(f.current),ne=N.tabs.findIndex(Ie=>Ie.current===Z);ne!==-1&&m.change(ne)}return I}),Y=$(h=>{let I=v.map(Z=>Z.current).filter(Boolean);if(h.key===T.Space||h.key===T.Enter){h.preventDefault(),h.stopPropagation(),m.change(w);return}switch(h.key){case T.Home:case T.PageUp:return h.preventDefault(),h.stopPropagation(),P(()=>E(I,k.First));case T.End:case T.PageDown:return h.preventDefault(),h.stopPropagation(),P(()=>E(I,k.Last))}if(P(()=>L(b,{vertical(){return h.key===T.ArrowUp?E(I,k.Previous|k.WrapAround):h.key===T.ArrowDown?E(I,k.Next|k.WrapAround):H.Error},horizontal(){return h.key===T.ArrowLeft?E(I,k.Previous|k.WrapAround):h.key===T.ArrowRight?E(I,k.Next|k.WrapAround):H.Error}}))===H.Success)return h.preventDefault()}),M=l.useRef(!1),y=$(()=>{var h;M.current||(M.current=!0,(h=f.current)==null||h.focus({preventScroll:!0}),m.change(w),qe(()=>{M.current=!1}))}),C=$(h=>{h.preventDefault()}),{isFocusVisible:A,focusProps:je}=ue({autoFocus:u}),{isHovered:ve,hoverProps:Ne}=Le({isDisabled:c}),{pressed:we,pressProps:Se}=Ue({disabled:c}),Te=U({selected:S,hover:ve,active:we,focus:A,autofocus:u,disabled:c}),ke=me({ref:R,onKeyDown:Y,onMouseDown:C,onClick:y,id:i,role:"tab",type:Ye(t,o),"aria-controls":(r=(a=n[w])==null?void 0:a.current)==null?void 0:r.id,"aria-selected":S,tabIndex:S?0:-1,disabled:c||void 0,autoFocus:u},je,Ne,Se);return W()({ourProps:ke,theirProps:g,slot:Te,defaultTag:ot,name:"Tabs.Tab"})}let dt="div";function ut(t,s){let{selectedIndex:a}=O("Tab.Panels"),r=q(s),d=U({selectedIndex:a}),i=t,c={ref:r};return W()({ourProps:c,theirProps:i,slot:d,defaultTag:dt,name:"Tabs.Panels"})}let mt="div",xt=oe.RenderStrategy|oe.Static;function ft(t,s){var a,r,d,i;let c=l.useId(),{id:u=`headlessui-tabs-panel-${c}`,tabIndex:g=0,...b}=t,{selectedIndex:p,tabs:j,panels:v}=O("Tab.Panel"),n=re("Tab.Panel"),m=l.useRef(null),N=q(m,s);Q(()=>n.registerPanel(m),[n,m]);let o=fe("panels"),x=v.indexOf(m);x===-1&&(x=o);let f=x===p,{isFocusVisible:R,focusProps:_}=ue(),w=U({selected:f,focus:R}),S=me({ref:N,id:u,role:"tabpanel","aria-labelledby":(r=(a=j[x])==null?void 0:a.current)==null?void 0:r.id,tabIndex:f?g:-1},_),P=W();return!f&&((d=b.unmount)==null||d)&&!((i=b.static)!=null&&i)?z.createElement(de,{"aria-hidden":"true",...S}):P({ourProps:S,theirProps:b,slot:w,defaultTag:mt,features:xt,visible:f,name:"Tabs.Panel"})}let pt=B(ct),pe=B(nt),he=B(it),ge=B(ut),be=B(ft),ht=Object.assign(pt,{Group:pe,List:he,Panels:ge,Panel:be});const gt={BASE_URL:"/"};function bt({open:t,setOpen:s,currentCart:a,quantity:r,loading:d,setLoading:i,theme:c="hub"}){const u=_e(Me,gt),g=d,b=ie[c]||ie.hub,p=a?a.lines.map((n,m)=>{const N=`/pure-plant-new/products/${n.merchandise.product.handle}`,o=n.merchandise.title===Oe?n.merchandise.product.title:n.merchandise.title;return{id:m,name:o,href:N,color:"None",price:G(n.cost.totalAmount),imageSrc:n.merchandise.product.featuredImage?.url,imageAlt:"Picture of "+o,quantity:n.quantity,lineId:n.id,variantId:n.merchandise.id}}):[],j=async(n,m)=>{i(!0);try{await Ce({lineId:n.lineId,variantId:n.variantId,quantity:m})}finally{i(!1)}},v=async n=>{i(!0);try{await Pe(n.lineId)}finally{i(!1)}};return l.useEffect(()=>(D("cartDialog",t),()=>D("cartDialog",!1)),[t]),!a||a.lines.length===0||r===0?e.jsxs(K,{open:t,onClose:s,className:"relative z-10",children:[e.jsx(X,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-stretch justify-center text-center sm:items-center sm:px-6 lg:px-8",children:e.jsx(ee,{transition:!0,className:"flex w-full transform text-left text-base transition data-closed:scale-105 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:max-w-3xl",children:e.jsxs("form",{className:"relative flex w-full flex-col overflow-hidden bg-white pt-6 pb-8 sm:rounded-lg sm:pb-6 lg:py-8",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"}),e.jsxs("button",{type:"button",onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(te,{"aria-hidden":"true",className:"size-6"})]})]}),e.jsxs("section",{"aria-labelledby":"cart-heading",children:[e.jsx("h2",{id:"cart-heading",className:"sr-only",children:"No items in your shopping cart"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 px-4 sm:px-6 lg:px-8",children:e.jsx("li",{className:"flex py-8 text-sm sm:items-center",children:e.jsx("div",{className:"ml-4 grid flex-auto grid-cols-1 grid-rows-1 items-start gap-x-5 gap-y-3 sm:ml-6 sm:flex sm:items-center sm:gap-0",children:e.jsx("div",{className:"row-end-1 flex-auto sm:pr-6",children:e.jsx("h3",{className:"font-medium text-gray-900",children:e.jsx("a",{children:"Your cart is empty."})})})})},0)})]}),e.jsx("section",{"aria-labelledby":"summary-heading",className:"mt-auto sm:px-6 lg:px-8"}),e.jsx("div",{className:"mt-8 flex justify-end px-4 sm:px-6 lg:px-8",children:e.jsx("a",{href:u+"/products/",children:e.jsx("div",{className:`rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white shadow-xs focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50 focus:outline-hidden ${b.bg}`,children:"Go to Products"})})})]})})})})]}):e.jsxs(K,{open:t,onClose:s,className:"relative z-10",children:[e.jsx(X,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-stretch justify-center text-center sm:items-center sm:px-6 lg:px-8",children:e.jsx(ee,{transition:!0,className:"flex w-full transform text-left text-base transition data-closed:scale-105 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:max-w-3xl",children:e.jsxs("form",{className:"relative flex w-full flex-col overflow-hidden bg-white pt-6 pb-8 sm:rounded-lg sm:pb-6 lg:py-8",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shopping Cart"}),e.jsxs("button",{type:"button",onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(te,{"aria-hidden":"true",className:"size-6"})]})]}),e.jsxs("section",{"aria-labelledby":"cart-heading",children:[e.jsx("h2",{id:"cart-heading",className:"sr-only",children:"Items in your shopping cart"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 px-4 sm:px-6 lg:px-8",children:p.map((n,m)=>e.jsxs("li",{className:"flex py-8 text-sm sm:items-center",children:[e.jsx("img",{alt:n.imageAlt,src:n.imageSrc,className:"size-24 flex-none rounded-lg border border-gray-200 sm:size-32"}),e.jsxs("div",{className:"ml-4 grid flex-auto grid-cols-1 grid-rows-1 items-start gap-x-5 gap-y-3 sm:ml-6 sm:flex sm:items-center sm:gap-0",children:[e.jsxs("div",{className:"row-end-1 flex-auto sm:pr-6",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:e.jsx("a",{href:n.href,children:n.name})}),e.jsx("p",{className:"mt-1 text-gray-500",children:n.color})]}),e.jsx("p",{className:"row-span-2 row-end-2 font-medium text-gray-900 sm:order-1 sm:ml-6 sm:w-1/3 sm:flex-none sm:text-right",children:n.price}),e.jsxs("div",{className:"flex items-center sm:block sm:flex-none sm:text-center",children:[e.jsx("div",{className:`flex items-center rounded-md outline-1 -outline-offset-1 outline-gray-300 focus-within:outline-2 focus-within:-outline-offset-2 ${b.outline}`,children:e.jsx("input",{type:"number",min:1,inputMode:"numeric",name:`quantity-${m}`,"aria-label":`Quantity, ${n.name}`,className:"w-12 appearance-none bg-white py-1.5 text-center text-base text-gray-900 focus:outline-none sm:text-sm",value:n.quantity,onChange:N=>{const o=Math.max(1,Number(N.target.value)||1);j(n,o)}})}),e.jsx("button",{type:"button",className:"ml-4 font-medium text-black hover:text-indigo-500 sm:mt-2 sm:ml-0",onClick:()=>v(n),children:e.jsx("span",{children:"Remove"})})]})]})]},n.id))})]}),e.jsx("section",{"aria-labelledby":"summary-heading",className:"mt-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-gray-50 p-6 sm:rounded-lg sm:p-8",children:[e.jsx("h2",{id:"summary-heading",className:"sr-only",children:"Order summary"}),e.jsx("div",{className:"flow-root",children:e.jsxs("dl",{className:"-my-4 divide-y divide-gray-200 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-gray-600",children:"Subtotal"}),e.jsx("dd",{className:"font-medium text-gray-900",children:G(a.cost.totalAmount)})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-gray-600",children:"Shipping"}),e.jsx("dd",{className:"font-medium text-gray-900",children:"Calculated at checkout."})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-gray-600",children:"Tax"}),e.jsx("dd",{className:"font-medium text-gray-900",children:G(a.cost.totalTaxAmount)})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Order total"}),e.jsx("dd",{className:"text-base font-medium text-gray-900",children:G({currencyCode:a.cost.totalAmount.currencyCode,amount:((parseFloat(a.cost.totalAmount.amount)||0)+(parseFloat(a.cost.totalTaxAmount.amount)||0)).toString()})})]})]})})]})}),e.jsx("div",{className:"mt-8 flex justify-end px-4 sm:px-6 lg:px-8",children:e.jsx("a",{href:g?void 0:a.checkoutUrl,"aria-disabled":g,tabIndex:g?-1:void 0,className:g?"pointer-events-none":void 0,children:e.jsx("div",{className:`rounded-md border border-transparent px-4 py-2 text-sm font-medium shadow-xs focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:outline-hidden ${g?"cursor-not-allowed bg-gray-300 text-gray-600":`${b.bg} text-white focus:ring-indigo-500`}`,children:"Continue to Payment"})})})]})})})})]})}async function yt(t){console.log("Access Token: ",t);const s=await fetch(Re,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`${t}`},body:JSON.stringify({query:`
        query {
          customer {
            firstName
            lastName
            emailAddress { emailAddress }
          }
        }
      `})});if(!s.ok)return console.log(await s.json()),null;const a=await s.json();if(console.log(a),a.errors||!a.data?.customer)return null;const r=a.data.customer;return{firstName:r.firstName??null,lastName:r.lastName??null,email:r.emailAddress?.emailAddress??null}}function ye(t){let s="";for(const a of t)s+=String.fromCharCode(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function jt(t){const s=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(t));return ye(new Uint8Array(s))}async function vt(){const t="pureplantdev.myshopify.com",s="1bebf8ab-21a5-49e2-87d1-083d826e2fac",a=`${window.location.origin}/auth/callback`,r=await fetch(`https://${t}/.well-known/openid-configuration`).then(g=>g.json()),d=ye(crypto.getRandomValues(new Uint8Array(32)));sessionStorage.setItem("pkce_verifier",d);const i=await jt(d),c=crypto.randomUUID();sessionStorage.setItem("oauth_state",c);const u=new URL(r.authorization_endpoint);u.searchParams.set("client_id",s),u.searchParams.set("response_type","code"),u.searchParams.set("scope","openid email customer-account-api:full"),u.searchParams.set("redirect_uri",a),u.searchParams.set("code_challenge",i),u.searchParams.set("code_challenge_method","S256"),u.searchParams.set("state",c),window.location.href=u.toString()}function ce(){const[t,s]=l.useState("loading"),[a,r]=l.useState("");return l.useEffect(()=>{const d=localStorage.getItem("customer_access_token");if(!d){s("signedOut");return}yt(d).then(i=>{i?(r(i.firstName&&i.lastName?`${i.firstName??""} ${i.lastName??""}`:`${i.email}`),s("signedIn")):(localStorage.removeItem("customer_access_token"),s("signedOut"))})},[]),t==="loading"?null:t==="signedOut"?e.jsx("button",{className:"cursor-pointer",onClick:vt,children:"Sign in"}):e.jsx("span",{children:a})}function _t({navigation:t,currentURL:s,theme:a,logo:r}){const[d,i]=l.useState(!1),c=J(Ae),u=J(ze),g=J(Ee),[b,p]=l.useState(!1),[j,v]=l.useState(!0),[n,m]=l.useState(null);l.useEffect(()=>{async function o(){try{await $e()}catch(x){console.error("Failed to refresh cart:",x)}finally{v(!1)}}o(),p(!0)},[]),l.useEffect(()=>(D("mobileMenu",d),()=>D("mobileMenu",!1)),[d]),l.useEffect(()=>{D("cartDialog",c)},[c]);const N=b?g:0;return e.jsxs("div",{className:"bg-red-800",children:[e.jsx(bt,{open:c,setOpen:le,currentCart:u,quantity:g,loading:j,setLoading:v,theme:a}),e.jsxs(K,{open:d,onClose:i,className:"relative z-40 lg:hidden",children:[e.jsx(X,{transition:!0,className:"fixed inset-0 bg-black/25 transition-opacity duration-300 ease-linear data-closed:opacity-0"}),e.jsx("div",{className:"fixed inset-0 z-40 flex",children:e.jsxs(ee,{transition:!0,className:"relative flex w-full max-w-xs transform flex-col overflow-y-auto bg-white pb-12 shadow-xl transition duration-300 ease-in-out data-closed:-translate-x-full",children:[e.jsx("div",{className:"flex px-4 pt-5 pb-2",children:e.jsxs("button",{type:"button",onClick:()=>i(!1),className:"relative -m-2 inline-flex items-center justify-center rounded-md p-2 text-gray-400",children:[e.jsx("span",{className:"absolute -inset-0.5"}),e.jsx("span",{className:"sr-only",children:"Close menu"}),e.jsx(te,{"aria-hidden":"true",className:"size-6"})]})}),e.jsxs(pe,{className:"mt-2",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx(he,{className:"-mb-px flex space-x-8 px-4",children:t.categories.map(o=>e.jsx(ht,{className:"data-selected:text-bold flex-1 border-b-2 border-transparent px-1 py-4 text-base font-medium whitespace-nowrap text-gray-900",children:o.name},o.name))})}),e.jsx(ge,{as:l.Fragment,children:t.categories.map(o=>e.jsx(be,{className:"space-y-12 px-4 py-6",children:e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-10",children:o.featured.map(x=>e.jsxs("div",{className:"group relative",children:[e.jsx("img",{alt:x.imageAlt,src:x.imageSrc,srcSet:x.imageSrcset,sizes:x.imageSizes,className:"aspect-square w-full rounded-md bg-gray-100 object-cover"}),e.jsxs("a",{href:x.href,className:"mt-6 block text-sm font-medium text-gray-900",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 z-10"}),x.name]}),e.jsx("p",{"aria-hidden":"true",className:"mt-1 text-sm text-gray-500",children:"Shop now"})]},x.name))})},o.name))})]}),e.jsx("div",{className:"space-y-6 border-t border-gray-200 px-4 py-6",children:t.pages.map(o=>e.jsx("div",{className:"flow-root",children:e.jsx("a",{href:o.href,className:"-m-2 block p-2 font-medium text-gray-900",children:o.name})},o.name))}),e.jsx("div",{className:"space-y-6 border-t border-gray-200 px-4 py-6",children:e.jsx(ce,{})})]})})]}),e.jsx("header",{className:"relative z-40",children:e.jsx("nav",{"aria-label":"Top",children:e.jsx("div",{className:"bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex h-16 items-center justify-between",onMouseLeave:()=>m(null),children:[e.jsx("div",{className:"hidden lg:flex lg:flex-1 lg:items-center",children:e.jsxs("a",{href:t.home.href,children:[e.jsx("span",{className:"sr-only",children:r.alt}),e.jsx("img",{alt:r.alt,src:r.src,srcSet:r.srcset,sizes:r.sizes,className:"h-8 w-auto"})]})}),e.jsx("div",{className:"hidden h-full lg:flex",children:e.jsx("div",{className:"inset-x-0 bottom-0 px-4",onBlur:o=>{o.currentTarget.contains(o.relatedTarget)||m(null)},children:e.jsxs("div",{className:"flex h-full justify-center space-x-14",children:[t.categories.map(o=>{const x=`megamenu-${o.name.toLowerCase().replace(/\s+/g,"-")}`;return e.jsxs("div",{className:"group flex",onMouseEnter:()=>m(o.name),children:[e.jsx("div",{className:"relative flex",children:e.jsx("button",{type:"button","aria-expanded":n===o.name,"aria-controls":x,onFocus:()=>m(o.name),onClick:()=>m(o.name),className:`relative flex items-center justify-center text-sm transition-colors duration-200 ease-out hover:text-gray-800 ${n===o.name?"font-bold text-black":"font-medium text-gray-700"}`,children:o.name})}),e.jsxs("div",{id:x,className:`absolute inset-x-0 top-full z-10 w-full bg-white text-sm text-gray-500 transition-opacity duration-100 ease-out ${n===o.name?"translate-y-0 opacity-100":"pointer-events-none opacity-0"}`,children:[e.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 top-1/2 bg-white shadow-sm"}),e.jsx("div",{className:"relative bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-8",children:e.jsx("div",{className:"grid grid-cols-4 gap-x-8 gap-y-10 py-16",children:o.featured.map(f=>e.jsxs("div",{className:"group relative",children:[e.jsx("img",{alt:f.imageAlt,src:f.imageSrc,srcSet:f.imageSrcset,sizes:f.imageSizes,className:"aspect-square w-full rounded-md bg-gray-100 object-cover"}),e.jsxs("a",{href:f.href,className:"mt-4 block font-medium text-gray-900",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 z-10"}),f.name]})]},f.name))})})})]})]},o.name)}),t.pages.map(o=>{const x=s===o.href;return e.jsx("a",{href:o.href,"aria-current":x?"page":void 0,className:`flex items-center text-sm transition-colors ${x?"font-bold text-black":"font-medium text-gray-700 hover:text-gray-800"}`,children:o.name},o.name)})]})})}),e.jsx("div",{className:"flex flex-1 items-center lg:hidden",children:e.jsxs("button",{type:"button",onClick:()=>i(!0),className:"-ml-2 rounded-md bg-white p-2 text-gray-400",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Ge,{"aria-hidden":"true",className:"size-6"})]})}),e.jsxs("a",{href:t.home.href,className:"lg:hidden",children:[e.jsx("span",{className:"sr-only",children:r.alt}),e.jsx("img",{alt:r.alt,src:r.src,srcSet:r.srcset,sizes:r.sizes,className:"h-8 w-auto"})]}),e.jsx("div",{className:"flex flex-1 items-center justify-end",children:e.jsxs("div",{className:"flex items-center lg:ml-8",children:[e.jsx("div",{className:"hidden whitespace-nowrap lg:flex lg:flex-1 lg:items-center lg:justify-end lg:space-x-6",children:e.jsx(ce,{})}),e.jsx("div",{className:"ml-4 flow-root lg:ml-8",children:e.jsxs("a",{onClick:()=>le(!c),className:"group -m-2 flex items-center p-2",children:[e.jsx(Ve,{"aria-hidden":"true",className:"size-6 shrink-0 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 group-hover:text-gray-800",suppressHydrationWarning:!0,children:N}),e.jsx("span",{className:"sr-only",children:"items in cart, view bag"})]})})]})})]})})})})})})]})}export{_t as default};
